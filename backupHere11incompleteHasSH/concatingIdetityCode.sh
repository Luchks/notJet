#!/bin/bash

# Lista de códigos a buscar
declare -a CODIGOS=(
    "AA6AI00001" "AA6AI00002" "AA6AI00003" "AA6AI00004" "AA6AI00005"
    "AA6AI00006" "AB2H000001" "AB2H000002" "AB2I000001" "AB2I000002"
    "AB2K000001" "AB2L000001" "AB2L000002" "AB2L000003" "AB2L000004"
    "AB2L000005" "AB2L000006" "AB2L000007" "AB2L000008" "AB2M000001"
    "AB2M000002" "AB2M000003" "AB2M000004" "AB2M000005" "AB2M000006"
    "AB2M000007" "AB2M000008" "AB2N000001" "AB3A000034" "AB3B000001"
    "AB3B000002" "AB3B000003" "AB3B000004" "AB3B000005" "AB3B000006"
    "AB4A000001" "AB4A000002" "AB4A000003" "AB4A000004" "AB4A000005"
    "AB4A000006" "AB4A000007" "AB4C000001" "AB4C000002" "AB4C000003"
    "AB4C000004" "AB4C000005" "AB4C000006" "AB4C000007" "AB4C000008"
    "AB4C000009" "AB4D000001" "AB4D000004" "AB4D000006" "AB4D000007"
    "AB4D000008" "AB4D000009" "AB4E000001" "AB4F000001" "AB4F000002"
    "AB4F000003" "AB4F000004" "AB4F000005" "AB4G000001" "AB4G000002"
    "AB4G000003" "AB4G000004" "AB4G000005" "AB4G000006" "AB4G000007"
    "AB4G000008" "AB4G000009" "AB4G000010" "AB4G000011" "AB4G000012"
    "AB4G000013" "AB4G000014" "AB4G000015" "AB4G000016" "AB4G000017"
    "AB4G000018" "AB4G000019" "AB4G000020" "AB4G000021" "AB4G000022"
    "AB4G000023" "AB4G000024" "AB4G000026" "AB4G000027" "AB4G000028"
    "AB4G000029" "AB4G000030" "AB4G000031" "AB4G000032" "AB4G000033"
    "AB4G000034" "AB4G000035" "AB4G000036" "AB4G000037" "AB4G000038"
    "AB4G000039" "AB4G000040" "AB4G000041" "AB4G000042" "AB4G000043"
    "AB4G000044" "AB4G000045" "AB4G000046" "AB4G000047" "AB4G000048"
    "AB4G000049" "AB4G000050" "AB4G000051" "AB4G000052" "AB4G000053"
    "AB4G000054" "AB4G000055" "AB4G000056" "R200050" "R200051"
    "R200052" "R200053" "R200054" "R20M0042" "R20M0132" "R20M0133"
    "R20M0136" "R20M0142"
)

# Carpeta donde están los archivos CSV CSV_DIR="csv_files"
CSV_DIR="."

# Recorrer cada archivo CSV en la carpeta
for archivo in "$CSV_DIR"/*.csv; do
    echo "Procesando archivo: $archivo"
    TMP_FILE="${archivo}.tmp"

    # Leer línea por línea y modificar los códigos encontrados
    while IFS= read -r linea; do
        for codigo in "${CODIGOS[@]}"; do
            linea=$(echo "$linea" | sed "s/\b$codigo\b/identificador:$codigo/g")
        done
        echo "$linea" >> "$TMP_FILE"
    done < "$archivo"

    # Reemplazar el archivo original con el modificado
    mv "$TMP_FILE" "$archivo"
done

echo "Proceso completado. Se han modificado los archivos CSV."

